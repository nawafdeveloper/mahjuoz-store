{"version":3,"sources":["../../../../lib/read.ts","../../../../components/top-action-bar.tsx/__nextjs-internal-proxy.mjs","../../../../app/%5Blocale%5D/%5Bsubdomain%5D/layout.tsx"],"sourcesContent":["import { BookingPage, BookingStatusPage, ServicePage, StorePage } from \"@/types/read.type\";\r\n\r\nexport async function fetchStorePage(webId: string) {\r\n    try {\r\n        const res = await fetch(\r\n            `https://customer.mahjuoz.com/v1/read/get-store-page/${webId}`,\r\n            { method: \"GET\" }\r\n        );\r\n\r\n        if (!res.ok) {\r\n            return { success: false, data: null };\r\n        }\r\n\r\n        const data: StorePage = await res.json();\r\n\r\n        return { success: true, data };\r\n    } catch (err) {\r\n        return { success: false, error: (err as Error).message };\r\n    }\r\n}\r\n\r\nexport async function fetchServicePage(serviceId: string) {\r\n    try {\r\n        const res = await fetch(\r\n            `https://customer.mahjuoz.com/v1/read/get-service-page/${serviceId}`,\r\n            { method: \"GET\" }\r\n        );\r\n\r\n        if (!res.ok) {\r\n            return { success: false, data: null };\r\n        }\r\n\r\n        const data: ServicePage = await res.json();\r\n\r\n        return { success: true, data };\r\n    } catch (err) {\r\n        return { success: false, error: (err as Error).message };\r\n    }\r\n}\r\n\r\nexport async function fetchStartBookingPage(serviceId: string) {\r\n    try {\r\n        const res = await fetch(\r\n            `https://customer.mahjuoz.com/v1/read/start-booking-page/${serviceId}`,\r\n            { method: \"GET\" }\r\n        );\r\n\r\n        if (!res.ok) {\r\n            return { success: false, data: null };\r\n        }\r\n\r\n        const data: BookingPage = await res.json();\r\n\r\n        return { success: true, data };\r\n    } catch (err) {\r\n        return { success: false, error: (err as Error).message };\r\n    }\r\n}\r\n\r\nexport async function fetchBookingDetailsPage(bookingId: string) {\r\n    try {\r\n        const res = await fetch(\r\n            `https://customer.mahjuoz.com/v1/read/booking-details/${bookingId}`,\r\n            { method: \"GET\" }\r\n        );\r\n\r\n        if (!res.ok) {\r\n            return { success: false, data: null };\r\n        }\r\n\r\n        const data: BookingStatusPage = await res.json();\r\n\r\n        return { success: true, data };\r\n    } catch (err) {\r\n        return { success: false, error: (err as Error).message };\r\n    }\r\n}\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/top-action-bar.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/top-action-bar.tsx\",\n    \"default\",\n);\n","import TopActionBar from '@/components/top-action-bar';\r\nimport { fetchStorePage } from '@/lib/read';\r\nimport { notFound } from 'next/navigation';\r\nimport React from 'react'\r\n\r\ntype Metadata = {\r\n    title?: string;\r\n    description?: string;\r\n    icons?: {\r\n        icon: { url: string; type: string; sizes: string };\r\n        apple: { url: string; sizes: string };\r\n    };\r\n};\r\n\r\nexport async function generateMetadata({ params }: { params: Promise<{ locale: string, subdomain: string }> }) {\r\n    const { locale, subdomain } = await params;\r\n\r\n    const storeRes = await fetchStorePage(subdomain);\r\n\r\n    if (!storeRes.success || !storeRes.data?.data?.store) {\r\n        return {};\r\n    }\r\n\r\n    const store = storeRes.data.data.store;\r\n\r\n    const favicon = store.favicon;\r\n\r\n    const metadata: Metadata = {\r\n        title: locale === \"ar\" ? store.storeNameAr : store.storeNameEn,\r\n        description: locale === \"ar\" ? store.descriptionAr : store.descriptionEn\r\n    };\r\n\r\n    if (favicon) {\r\n        const fileExtension = favicon.split('.').pop()?.toLowerCase();\r\n        let iconType = 'image/x-icon';\r\n        if (fileExtension === 'png') {\r\n            iconType = 'image/png';\r\n        } else if (fileExtension === 'svg') {\r\n            iconType = 'image/svg+xml';\r\n        }\r\n\r\n        metadata.icons = {\r\n            icon: {\r\n                url: favicon,\r\n                type: iconType,\r\n                sizes: '32x32',\r\n            },\r\n            apple: {\r\n                url: favicon,\r\n                sizes: '180x180',\r\n            }\r\n        };\r\n    }\r\n\r\n    return metadata;\r\n}\r\n\r\nexport default async function StoreLayout({\r\n    children,\r\n    params\r\n}: {\r\n    children: React.ReactNode;\r\n    params: Promise<{ subdomain: string }>;\r\n}) {\r\n    const { subdomain } = await params;\r\n    const storeRes = await fetchStorePage(subdomain);\r\n\r\n    if (!storeRes.success || !storeRes.data?.data?.store) {\r\n        return notFound();\r\n    }\r\n\r\n    return (\r\n        <main className='h-screen'>\r\n            <TopActionBar\r\n                twitter={storeRes.data.data.store.socialTwitter}\r\n                instagram={storeRes.data.data.store.socialInstagram}\r\n                tiktok={storeRes.data.data.store.socialTiktok}\r\n                whatsapp={storeRes.data.data.store.whatsappContact}\r\n            />\r\n            {children}\r\n        </main>\r\n    )\r\n}"],"names":[],"mappings":"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","ignoreList":[1]}